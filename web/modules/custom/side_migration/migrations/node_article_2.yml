langcode: en
status: true
id: node_article_2
label: 'Node: article - Move uid value to field author'
migration_tags:
  - inside_job
source:
  plugin: 'content_entity:node'
  bundle: blog
process:

  # Uses the same NID so that it can overwrite the current node.
  nid:
    plugin: migration_lookup
    migration:
      - node_article
    source: nid

  # Assign the value of the old field to the new field.
  field_author/target_id:
    plugin: migration_lookup
    migration:
      - node_author
    source: uid
  # Keep the changed date to the original value
  changed:
    plugin: sub_process
    source: changed
    process:
      value: value
      preserve:
        plugin: default_value
        default_value: true
destination:
  plugin: 'entity:node'
  default_bundle: article

  # overwrite_properties provided by the entity:node destination plugin. List fields that you want to overwrite
  overwrite_properties:
    - field_media_image
    - changed
migration_dependencies:
  required:
    - media_image_from_node_image
